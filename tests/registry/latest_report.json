{"numTotalTestSuites":18,"numPassedTestSuites":18,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":53,"numPassedTests":53,"numFailedTests":0,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1772118359355,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore ベクトルを保存して全件取得できる","status":"passed","title":"ベクトルを保存して全件取得できる","duration":18.163545999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 同じ chunk_id で upsert すると上書きされる","status":"passed","title":"同じ chunk_id で upsert すると上書きされる","duration":1.022852999999941,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 複数チャンクを保存して全件取得できる","status":"passed","title":"複数チャンクを保存して全件取得できる","duration":0.857052000000067,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore hasChunk: 既存ハッシュは true、未存在は false","status":"passed","title":"hasChunk: 既存ハッシュは true、未存在は false","duration":1.2559969999999794,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 空の DB では getAll が空配列を返す","status":"passed","title":"空の DB では getAll が空配列を返す","duration":0.9100899999999683,"failureMessages":[],"meta":{}}],"startTime":1772118359991,"endTime":1772118360012.9102,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/db/embedding-store.test.ts"},{"assertionResults":[{"ancestorTitles":["JobStore"],"fullName":"JobStore ジョブを作成して取得できる","status":"passed","title":"ジョブを作成して取得できる","duration":12.635083000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore ジョブのステータスを更新できる","status":"passed","title":"ジョブのステータスを更新できる","duration":8.749150999999983,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 存在しない job_id を更新するとエラー","status":"passed","title":"存在しない job_id を更新するとエラー","duration":6.2590040000000045,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 同じ hash_snapshot + job_type の完了済みジョブがあれば isAlreadyDone が true","status":"passed","title":"同じ hash_snapshot + job_type の完了済みジョブがあれば isAlreadyDone が true","duration":9.172202999999968,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 未完了ジョブは isAlreadyDone が false","status":"passed","title":"未完了ジョブは isAlreadyDone が false","duration":6.138191000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore run_id でジョブ一覧を取得できる","status":"passed","title":"run_id でジョブ一覧を取得できる","duration":9.935658999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore ロールバックログを保存して取得できる","status":"passed","title":"ロールバックログを保存して取得できる","duration":5.658955999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 存在しない run_id のロールバックログは null","status":"passed","title":"存在しない run_id のロールバックログは null","duration":3.9888080000000627,"failureMessages":[],"meta":{}}],"startTime":1772118359969,"endTime":1772118360030.9888,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/db/job-store.test.ts"},{"assertionResults":[{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア >= 0.7 は split","status":"passed","title":"スコア >= 0.7 は split","duration":1.2621139999999968,"failureMessages":[],"meta":{}},{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア 0.4〜0.7 未満は candidate","status":"passed","title":"スコア 0.4〜0.7 未満は candidate","duration":0.6786849999999731,"failureMessages":[],"meta":{}},{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア < 0.4 は continue","status":"passed","title":"スコア < 0.4 は continue","duration":0.2469459999999799,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 時間ギャップ 6時間以上でスコア +0.4","status":"passed","title":"時間ギャップ 6時間以上でスコア +0.4","duration":1.598306999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 話題転換語でスコア +0.3","status":"passed","title":"話題転換語でスコア +0.3","duration":0.6242819999999938,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 明示的終了宣言でスコア +0.6","status":"passed","title":"明示的終了宣言でスコア +0.6","duration":0.4497440000000097,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast スコアが累積する（時間ギャップ + 終了宣言で分割確定）","status":"passed","title":"スコアが累積する（時間ギャップ + 終了宣言で分割確定）","duration":0.30927999999994427,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 関係ない発言が続いても境界は出ない","status":"passed","title":"関係ない発言が続いても境界は出ない","duration":0.322488999999905,"failureMessages":[],"meta":{}}],"startTime":1772118359983,"endTime":1772118359989.3225,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/boundary-detector.test.ts"},{"assertionResults":[{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown User:/Assistant: 形式を正しくパースする","status":"passed","title":"User:/Assistant: 形式を正しくパースする","duration":3.3087880000000496,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown **User:** 形式（太字）を正しくパースする","status":"passed","title":"**User:** 形式（太字）を正しくパースする","duration":0.6509209999999257,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown タイムスタンプ付きフォーマットを正しくパースする","status":"passed","title":"タイムスタンプ付きフォーマットを正しくパースする","duration":1.824965999999904,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown Human:/AI: 形式を正しくパースする","status":"passed","title":"Human:/AI: 形式を正しくパースする","duration":0.3821269999999686,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown 複数行の発言をまとめてパースする","status":"passed","title":"複数行の発言をまとめてパースする","duration":0.5474849999999378,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown 空文字列を渡すと空配列を返す","status":"passed","title":"空文字列を渡すと空配列を返す","duration":0.48781799999994746,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown msg_id が一意で連番になっている","status":"passed","title":"msg_id が一意で連番になっている","duration":0.735531999999921,"failureMessages":[],"meta":{}}],"startTime":1772118359952,"endTime":1772118359959.7356,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/chat-parser.test.ts"},{"assertionResults":[{"ancestorTitles":["chunkText"],"fullName":"chunkText 空文字列は空配列を返す","status":"passed","title":"空文字列は空配列を返す","duration":2.0195340000000215,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 短いテキスト（MIN未満）は空配列を返す","status":"passed","title":"短いテキスト（MIN未満）は空配列を返す","duration":0.32434200000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 1段落は1チャンクになる","status":"passed","title":"1段落は1チャンクになる","duration":0.943634999999972,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText MAX_CHARS を超えると複数チャンクに分割される","status":"passed","title":"MAX_CHARS を超えると複数チャンクに分割される","duration":0.5393060000000105,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 各チャンクに一意の chunkId が割り当てられる","status":"passed","title":"各チャンクに一意の chunkId が割り当てられる","duration":0.22609299999999166,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText hash は同じテキストなら同じ値になる","status":"passed","title":"hash は同じテキストなら同じ値になる","duration":0.22046100000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText ノートパスがチャンクIDに反映される","status":"passed","title":"ノートパスがチャンクIDに反映される","duration":0.2605439999999817,"failureMessages":[],"meta":{}}],"startTime":1772118359984,"endTime":1772118359989.2605,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/chunker.test.ts"},{"assertionResults":[{"ancestorTitles":["estimateNote"],"fullName":"estimateNote 単一トピックのチャットは estimatedThreadCount=1","status":"passed","title":"単一トピックのチャットは estimatedThreadCount=1","duration":6.590535000000045,"failureMessages":[],"meta":{}},{"ancestorTitles":["estimateNote"],"fullName":"estimateNote 個人情報（メールアドレス）が含まれると hasPersonalData=true","status":"passed","title":"個人情報（メールアドレス）が含まれると hasPersonalData=true","duration":3.653144999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["estimateNote"],"fullName":"estimateNote notePath と estimatedDurationSec が正しく返る","status":"passed","title":"notePath と estimatedDurationSec が正しく返る","duration":4.317406000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent 同じ文字列は同じハッシュ","status":"passed","title":"同じ文字列は同じハッシュ","duration":2.1214860000000044,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent 異なる文字列は異なるハッシュ","status":"passed","title":"異なる文字列は異なるハッシュ","duration":2.0662139999999454,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent SHA-256 形式（64文字の16進数）","status":"passed","title":"SHA-256 形式（64文字の16進数）","duration":1.4664940000000115,"failureMessages":[],"meta":{}}],"startTime":1772118359982,"endTime":1772118360002.4666,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/estimator.test.ts"},{"assertionResults":[{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 同一ベクトルは 1.0 を返す","status":"passed","title":"同一ベクトルは 1.0 を返す","duration":1.0908109999999738,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 直交ベクトルは 0 を返す","status":"passed","title":"直交ベクトルは 0 を返す","duration":0.4229840000000422,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 逆方向ベクトルは -1.0 を返す","status":"passed","title":"逆方向ベクトルは -1.0 を返す","duration":0.20516900000001215,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 正規化済みでないベクトルでもスコアが [0, 1] に収まる（同方向）","status":"passed","title":"正規化済みでないベクトルでもスコアが [0, 1] に収まる（同方向）","duration":0.31770199999999704,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity ゼロベクトルは 0 を返す（ゼロ除算を起こさない）","status":"passed","title":"ゼロベクトルは 0 を返す（ゼロ除算を起こさない）","duration":0.2702600000000075,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 一般的なベクトルでスコアが計算される","status":"passed","title":"一般的なベクトルでスコアが計算される","duration":0.13847599999996874,"failureMessages":[],"meta":{}}],"startTime":1772118359979,"endTime":1772118359982.1384,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/similarity.test.ts"},{"assertionResults":[{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 時間ギャップがあるチャットを複数スレッドに分割する","status":"passed","title":"時間ギャップがあるチャットを複数スレッドに分割する","duration":4.315458999999919,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 分割点がないチャットは1スレッドのまま","status":"passed","title":"分割点がないチャットは1スレッドのまま","duration":1.127954999999929,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 空メッセージ配列で1スレッド（空）を返す","status":"passed","title":"空メッセージ配列で1スレッド（空）を返す","duration":0.45600899999999456,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 各スレッドに一意の thread_id が付く","status":"passed","title":"各スレッドに一意の thread_id が付く","duration":0.5335559999999759,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 全メッセージがいずれかのスレッドに含まれる","status":"passed","title":"全メッセージがいずれかのスレッドに含まれる","duration":0.3039019999999937,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads startIndex / endIndex が正しく設定される","status":"passed","title":"startIndex / endIndex が正しく設定される","duration":0.33318599999995513,"failureMessages":[],"meta":{}}],"startTime":1772118359989,"endTime":1772118359996.3333,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/thread-builder.test.ts"}]}