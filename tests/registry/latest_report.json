{"numTotalTestSuites":19,"numPassedTestSuites":19,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":57,"numPassedTests":57,"numFailedTests":0,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1772183256767,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore ベクトルを保存して全件取得できる","status":"passed","title":"ベクトルを保存して全件取得できる","duration":54.09947299999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 同じ chunk_id で upsert すると上書きされる","status":"passed","title":"同じ chunk_id で upsert すると上書きされる","duration":0.9589609999999311,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 複数チャンクを保存して全件取得できる","status":"passed","title":"複数チャンクを保存して全件取得できる","duration":1.2524419999999736,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore hasChunk: 既存ハッシュは true、未存在は false","status":"passed","title":"hasChunk: 既存ハッシュは true、未存在は false","duration":0.8097060000000056,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 空の DB では getAll が空配列を返す","status":"passed","title":"空の DB では getAll が空配列を返す","duration":0.5579360000000406,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore","listEmbeddedNotes"],"fullName":"EmbeddingStore listEmbeddedNotes 2ノート埋め込み済み → 2件返る","status":"passed","title":"2ノート埋め込み済み → 2件返る","duration":1.0856840000000147,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore","listEmbeddedNotes"],"fullName":"EmbeddingStore listEmbeddedNotes chunkCount がノートごとのチャンク数を正しく返す","status":"passed","title":"chunkCount がノートごとのチャンク数を正しく返す","duration":1.2836639999999306,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore","listEmbeddedNotes"],"fullName":"EmbeddingStore listEmbeddedNotes 埋め込みのないチャンクはリストに含まれない","status":"passed","title":"埋め込みのないチャンクはリストに含まれない","duration":0.8557299999999941,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore","listEmbeddedNotes"],"fullName":"EmbeddingStore listEmbeddedNotes 空の DB では空配列を返す","status":"passed","title":"空の DB では空配列を返す","duration":0.7462959999999157,"failureMessages":[],"meta":{}}],"startTime":1772183257412,"endTime":1772183257473.7463,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/db/embedding-store.test.ts"},{"assertionResults":[{"ancestorTitles":["JobStore"],"fullName":"JobStore ジョブを作成して取得できる","status":"passed","title":"ジョブを作成して取得できる","duration":10.940202,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore ジョブのステータスを更新できる","status":"passed","title":"ジョブのステータスを更新できる","duration":7.706339999999955,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 存在しない job_id を更新するとエラー","status":"passed","title":"存在しない job_id を更新するとエラー","duration":6.413123000000041,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 同じ hash_snapshot + job_type の完了済みジョブがあれば isAlreadyDone が true","status":"passed","title":"同じ hash_snapshot + job_type の完了済みジョブがあれば isAlreadyDone が true","duration":6.43421699999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 未完了ジョブは isAlreadyDone が false","status":"passed","title":"未完了ジョブは isAlreadyDone が false","duration":4.83733600000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore run_id でジョブ一覧を取得できる","status":"passed","title":"run_id でジョブ一覧を取得できる","duration":6.69566999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore ロールバックログを保存して取得できる","status":"passed","title":"ロールバックログを保存して取得できる","duration":3.8870239999999967,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 存在しない run_id のロールバックログは null","status":"passed","title":"存在しない run_id のロールバックログは null","duration":3.119138000000021,"failureMessages":[],"meta":{}}],"startTime":1772183257398,"endTime":1772183257448.1191,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/db/job-store.test.ts"},{"assertionResults":[{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア >= 0.7 は split","status":"passed","title":"スコア >= 0.7 は split","duration":1.0856870000000072,"failureMessages":[],"meta":{}},{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア 0.4〜0.7 未満は candidate","status":"passed","title":"スコア 0.4〜0.7 未満は candidate","duration":0.2732500000000755,"failureMessages":[],"meta":{}},{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア < 0.4 は continue","status":"passed","title":"スコア < 0.4 は continue","duration":0.1684779999999364,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 時間ギャップ 6時間以上でスコア +0.4","status":"passed","title":"時間ギャップ 6時間以上でスコア +0.4","duration":1.204119999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 話題転換語でスコア +0.3","status":"passed","title":"話題転換語でスコア +0.3","duration":0.36797999999998865,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 明示的終了宣言でスコア +0.6","status":"passed","title":"明示的終了宣言でスコア +0.6","duration":0.2509059999999863,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast スコアが累積する（時間ギャップ + 終了宣言で分割確定）","status":"passed","title":"スコアが累積する（時間ギャップ + 終了宣言で分割確定）","duration":0.2061229999999341,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 関係ない発言が続いても境界は出ない","status":"passed","title":"関係ない発言が続いても境界は出ない","duration":0.21886399999993955,"failureMessages":[],"meta":{}}],"startTime":1772183257393,"endTime":1772183257397.251,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/boundary-detector.test.ts"},{"assertionResults":[{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown User:/Assistant: 形式を正しくパースする","status":"passed","title":"User:/Assistant: 形式を正しくパースする","duration":2.284441999999899,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown **User:** 形式（太字）を正しくパースする","status":"passed","title":"**User:** 形式（太字）を正しくパースする","duration":0.38740599999994174,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown タイムスタンプ付きフォーマットを正しくパースする","status":"passed","title":"タイムスタンプ付きフォーマットを正しくパースする","duration":1.7124790000000303,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown Human:/AI: 形式を正しくパースする","status":"passed","title":"Human:/AI: 形式を正しくパースする","duration":0.33841499999994085,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown 複数行の発言をまとめてパースする","status":"passed","title":"複数行の発言をまとめてパースする","duration":0.4037519999999404,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown 空文字列を渡すと空配列を返す","status":"passed","title":"空文字列を渡すと空配列を返す","duration":0.4191759999999931,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown msg_id が一意で連番になっている","status":"passed","title":"msg_id が一意で連番になっている","duration":0.5929680000000417,"failureMessages":[],"meta":{}}],"startTime":1772183257393,"endTime":1772183257398.593,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/chat-parser.test.ts"},{"assertionResults":[{"ancestorTitles":["chunkText"],"fullName":"chunkText 空文字列は空配列を返す","status":"passed","title":"空文字列は空配列を返す","duration":1.5795329999999694,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 短いテキスト（MIN未満）は空配列を返す","status":"passed","title":"短いテキスト（MIN未満）は空配列を返す","duration":0.2762569999999869,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 1段落は1チャンクになる","status":"passed","title":"1段落は1チャンクになる","duration":0.8673100000000886,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText MAX_CHARS を超えると複数チャンクに分割される","status":"passed","title":"MAX_CHARS を超えると複数チャンクに分割される","duration":0.521904999999947,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 各チャンクに一意の chunkId が割り当てられる","status":"passed","title":"各チャンクに一意の chunkId が割り当てられる","duration":0.194733000000042,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText hash は同じテキストなら同じ値になる","status":"passed","title":"hash は同じテキストなら同じ値になる","duration":0.7168679999999767,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText ノートパスがチャンクIDに反映される","status":"passed","title":"ノートパスがチャンクIDに反映される","duration":0.38513000000000375,"failureMessages":[],"meta":{}}],"startTime":1772183257412,"endTime":1772183257416.7168,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/chunker.test.ts"},{"assertionResults":[{"ancestorTitles":["estimateNote"],"fullName":"estimateNote 単一トピックのチャットは estimatedThreadCount=1","status":"passed","title":"単一トピックのチャットは estimatedThreadCount=1","duration":5.978897999999958,"failureMessages":[],"meta":{}},{"ancestorTitles":["estimateNote"],"fullName":"estimateNote 個人情報（メールアドレス）が含まれると hasPersonalData=true","status":"passed","title":"個人情報（メールアドレス）が含まれると hasPersonalData=true","duration":3.604184999999916,"failureMessages":[],"meta":{}},{"ancestorTitles":["estimateNote"],"fullName":"estimateNote notePath と estimatedDurationSec が正しく返る","status":"passed","title":"notePath と estimatedDurationSec が正しく返る","duration":3.3824749999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent 同じ文字列は同じハッシュ","status":"passed","title":"同じ文字列は同じハッシュ","duration":1.784579000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent 異なる文字列は異なるハッシュ","status":"passed","title":"異なる文字列は異なるハッシュ","duration":1.6079939999999624,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent SHA-256 形式（64文字の16進数）","status":"passed","title":"SHA-256 形式（64文字の16進数）","duration":1.2325499999999465,"failureMessages":[],"meta":{}}],"startTime":1772183257408,"endTime":1772183257426.2327,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/estimator.test.ts"},{"assertionResults":[{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 同一ベクトルは 1.0 を返す","status":"passed","title":"同一ベクトルは 1.0 を返す","duration":1.0246460000000184,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 直交ベクトルは 0 を返す","status":"passed","title":"直交ベクトルは 0 を返す","duration":0.28755999999998494,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 逆方向ベクトルは -1.0 を返す","status":"passed","title":"逆方向ベクトルは -1.0 を返す","duration":0.12930399999999054,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 正規化済みでないベクトルでもスコアが [0, 1] に収まる（同方向）","status":"passed","title":"正規化済みでないベクトルでもスコアが [0, 1] に収まる（同方向）","duration":0.2809899999999743,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity ゼロベクトルは 0 を返す（ゼロ除算を起こさない）","status":"passed","title":"ゼロベクトルは 0 を返す（ゼロ除算を起こさない）","duration":0.26944400000002133,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 一般的なベクトルでスコアが計算される","status":"passed","title":"一般的なベクトルでスコアが計算される","duration":0.10019700000003695,"failureMessages":[],"meta":{}}],"startTime":1772183257393,"endTime":1772183257395.1,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/similarity.test.ts"},{"assertionResults":[{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 時間ギャップがあるチャットを複数スレッドに分割する","status":"passed","title":"時間ギャップがあるチャットを複数スレッドに分割する","duration":3.0815260000000535,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 分割点がないチャットは1スレッドのまま","status":"passed","title":"分割点がないチャットは1スレッドのまま","duration":0.9564340000000584,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 空メッセージ配列で1スレッド（空）を返す","status":"passed","title":"空メッセージ配列で1スレッド（空）を返す","duration":0.2774100000000317,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 各スレッドに一意の thread_id が付く","status":"passed","title":"各スレッドに一意の thread_id が付く","duration":0.4126890000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 全メッセージがいずれかのスレッドに含まれる","status":"passed","title":"全メッセージがいずれかのスレッドに含まれる","duration":0.17378500000006625,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads startIndex / endIndex が正しく設定される","status":"passed","title":"startIndex / endIndex が正しく設定される","duration":0.256842000000006,"failureMessages":[],"meta":{}}],"startTime":1772183257403,"endTime":1772183257408.2568,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/thread-builder.test.ts"}]}