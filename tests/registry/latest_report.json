{"numTotalTestSuites":18,"numPassedTestSuites":18,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":53,"numPassedTests":53,"numFailedTests":0,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1772156472875,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore ベクトルを保存して全件取得できる","status":"passed","title":"ベクトルを保存して全件取得できる","duration":63.81549999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 同じ chunk_id で upsert すると上書きされる","status":"passed","title":"同じ chunk_id で upsert すると上書きされる","duration":1.0204609999999548,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 複数チャンクを保存して全件取得できる","status":"passed","title":"複数チャンクを保存して全件取得できる","duration":0.8334800000000087,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore hasChunk: 既存ハッシュは true、未存在は false","status":"passed","title":"hasChunk: 既存ハッシュは true、未存在は false","duration":1.163772999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 空の DB では getAll が空配列を返す","status":"passed","title":"空の DB では getAll が空配列を返す","duration":0.8310439999999062,"failureMessages":[],"meta":{}}],"startTime":1772156473514,"endTime":1772156473581.831,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/db/embedding-store.test.ts"},{"assertionResults":[{"ancestorTitles":["JobStore"],"fullName":"JobStore ジョブを作成して取得できる","status":"passed","title":"ジョブを作成して取得できる","duration":11.285585999999967,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore ジョブのステータスを更新できる","status":"passed","title":"ジョブのステータスを更新できる","duration":8.77745200000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 存在しない job_id を更新するとエラー","status":"passed","title":"存在しない job_id を更新するとエラー","duration":5.420601000000033,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 同じ hash_snapshot + job_type の完了済みジョブがあれば isAlreadyDone が true","status":"passed","title":"同じ hash_snapshot + job_type の完了済みジョブがあれば isAlreadyDone が true","duration":5.897964999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 未完了ジョブは isAlreadyDone が false","status":"passed","title":"未完了ジョブは isAlreadyDone が false","duration":4.715483999999947,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore run_id でジョブ一覧を取得できる","status":"passed","title":"run_id でジョブ一覧を取得できる","duration":6.397426999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore ロールバックログを保存して取得できる","status":"passed","title":"ロールバックログを保存して取得できる","duration":4.6151740000000245,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 存在しない run_id のロールバックログは null","status":"passed","title":"存在しない run_id のロールバックログは null","duration":3.0262629999999717,"failureMessages":[],"meta":{}}],"startTime":1772156473504,"endTime":1772156473554.0264,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/db/job-store.test.ts"},{"assertionResults":[{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア >= 0.7 は split","status":"passed","title":"スコア >= 0.7 は split","duration":1.3994219999999586,"failureMessages":[],"meta":{}},{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア 0.4〜0.7 未満は candidate","status":"passed","title":"スコア 0.4〜0.7 未満は candidate","duration":0.2894769999999198,"failureMessages":[],"meta":{}},{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア < 0.4 は continue","status":"passed","title":"スコア < 0.4 は continue","duration":0.17259199999989505,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 時間ギャップ 6時間以上でスコア +0.4","status":"passed","title":"時間ギャップ 6時間以上でスコア +0.4","duration":1.5660769999999502,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 話題転換語でスコア +0.3","status":"passed","title":"話題転換語でスコア +0.3","duration":0.38058699999999135,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 明示的終了宣言でスコア +0.6","status":"passed","title":"明示的終了宣言でスコア +0.6","duration":0.2673689999999169,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast スコアが累積する（時間ギャップ + 終了宣言で分割確定）","status":"passed","title":"スコアが累積する（時間ギャップ + 終了宣言で分割確定）","duration":0.21724700000004304,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 関係ない発言が続いても境界は出ない","status":"passed","title":"関係ない発言が続いても境界は出ない","duration":0.22699099999999817,"failureMessages":[],"meta":{}}],"startTime":1772156473496,"endTime":1772156473500.3806,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/boundary-detector.test.ts"},{"assertionResults":[{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown User:/Assistant: 形式を正しくパースする","status":"passed","title":"User:/Assistant: 形式を正しくパースする","duration":2.8489379999999755,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown **User:** 形式（太字）を正しくパースする","status":"passed","title":"**User:** 形式（太字）を正しくパースする","duration":0.619008000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown タイムスタンプ付きフォーマットを正しくパースする","status":"passed","title":"タイムスタンプ付きフォーマットを正しくパースする","duration":1.8900049999999737,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown Human:/AI: 形式を正しくパースする","status":"passed","title":"Human:/AI: 形式を正しくパースする","duration":0.6065770000000157,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown 複数行の発言をまとめてパースする","status":"passed","title":"複数行の発言をまとめてパースする","duration":0.637777999999912,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown 空文字列を渡すと空配列を返す","status":"passed","title":"空文字列を渡すと空配列を返す","duration":0.49288400000000365,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown msg_id が一意で連番になっている","status":"passed","title":"msg_id が一意で連番になっている","duration":0.7022789999999759,"failureMessages":[],"meta":{}}],"startTime":1772156473496,"endTime":1772156473503.7024,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/chat-parser.test.ts"},{"assertionResults":[{"ancestorTitles":["chunkText"],"fullName":"chunkText 空文字列は空配列を返す","status":"passed","title":"空文字列は空配列を返す","duration":2.388310000000047,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 短いテキスト（MIN未満）は空配列を返す","status":"passed","title":"短いテキスト（MIN未満）は空配列を返す","duration":0.5128889999999728,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 1段落は1チャンクになる","status":"passed","title":"1段落は1チャンクになる","duration":1.3523580000000948,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText MAX_CHARS を超えると複数チャンクに分割される","status":"passed","title":"MAX_CHARS を超えると複数チャンクに分割される","duration":0.7999160000000529,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 各チャンクに一意の chunkId が割り当てられる","status":"passed","title":"各チャンクに一意の chunkId が割り当てられる","duration":0.3896620000000439,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText hash は同じテキストなら同じ値になる","status":"passed","title":"hash は同じテキストなら同じ値になる","duration":0.2909270000000106,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText ノートパスがチャンクIDに反映される","status":"passed","title":"ノートパスがチャンクIDに反映される","duration":0.38939299999992727,"failureMessages":[],"meta":{}}],"startTime":1772156473503,"endTime":1772156473509.3894,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/chunker.test.ts"},{"assertionResults":[{"ancestorTitles":["estimateNote"],"fullName":"estimateNote 単一トピックのチャットは estimatedThreadCount=1","status":"passed","title":"単一トピックのチャットは estimatedThreadCount=1","duration":6.174733999999944,"failureMessages":[],"meta":{}},{"ancestorTitles":["estimateNote"],"fullName":"estimateNote 個人情報（メールアドレス）が含まれると hasPersonalData=true","status":"passed","title":"個人情報（メールアドレス）が含まれると hasPersonalData=true","duration":2.908914999999979,"failureMessages":[],"meta":{}},{"ancestorTitles":["estimateNote"],"fullName":"estimateNote notePath と estimatedDurationSec が正しく返る","status":"passed","title":"notePath と estimatedDurationSec が正しく返る","duration":3.5052030000000514,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent 同じ文字列は同じハッシュ","status":"passed","title":"同じ文字列は同じハッシュ","duration":1.6184449999999515,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent 異なる文字列は異なるハッシュ","status":"passed","title":"異なる文字列は異なるハッシュ","duration":1.5081470000000081,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent SHA-256 形式（64文字の16進数）","status":"passed","title":"SHA-256 形式（64文字の16進数）","duration":1.1732600000000275,"failureMessages":[],"meta":{}}],"startTime":1772156473512,"endTime":1772156473530.1733,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/estimator.test.ts"},{"assertionResults":[{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 同一ベクトルは 1.0 を返す","status":"passed","title":"同一ベクトルは 1.0 を返す","duration":1.1910689999999704,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 直交ベクトルは 0 を返す","status":"passed","title":"直交ベクトルは 0 を返す","duration":0.3517749999999751,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 逆方向ベクトルは -1.0 を返す","status":"passed","title":"逆方向ベクトルは -1.0 を返す","duration":0.1368929999999864,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 正規化済みでないベクトルでもスコアが [0, 1] に収まる（同方向）","status":"passed","title":"正規化済みでないベクトルでもスコアが [0, 1] に収まる（同方向）","duration":0.2520799999999781,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity ゼロベクトルは 0 を返す（ゼロ除算を起こさない）","status":"passed","title":"ゼロベクトルは 0 を返す（ゼロ除算を起こさない）","duration":0.2073249999999689,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 一般的なベクトルでスコアが計算される","status":"passed","title":"一般的なベクトルでスコアが計算される","duration":0.1370399999999563,"failureMessages":[],"meta":{}}],"startTime":1772156473495,"endTime":1772156473497.2522,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/similarity.test.ts"},{"assertionResults":[{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 時間ギャップがあるチャットを複数スレッドに分割する","status":"passed","title":"時間ギャップがあるチャットを複数スレッドに分割する","duration":4.213514000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 分割点がないチャットは1スレッドのまま","status":"passed","title":"分割点がないチャットは1スレッドのまま","duration":1.4784259999998994,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 空メッセージ配列で1スレッド（空）を返す","status":"passed","title":"空メッセージ配列で1スレッド（空）を返す","duration":0.46357800000009775,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 各スレッドに一意の thread_id が付く","status":"passed","title":"各スレッドに一意の thread_id が付く","duration":0.629097999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 全メッセージがいずれかのスレッドに含まれる","status":"passed","title":"全メッセージがいずれかのスレッドに含まれる","duration":0.3083440000000337,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads startIndex / endIndex が正しく設定される","status":"passed","title":"startIndex / endIndex が正しく設定される","duration":0.43111799999996947,"failureMessages":[],"meta":{}}],"startTime":1772156473507,"endTime":1772156473515.4312,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/thread-builder.test.ts"}]}