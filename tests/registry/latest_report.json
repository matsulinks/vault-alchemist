{"numTotalTestSuites":18,"numPassedTestSuites":18,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":53,"numPassedTests":53,"numFailedTests":0,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1772156673397,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore ベクトルを保存して全件取得できる","status":"passed","title":"ベクトルを保存して全件取得できる","duration":16.48312199999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 同じ chunk_id で upsert すると上書きされる","status":"passed","title":"同じ chunk_id で upsert すると上書きされる","duration":1.149787999999944,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 複数チャンクを保存して全件取得できる","status":"passed","title":"複数チャンクを保存して全件取得できる","duration":1.0184330000000728,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore hasChunk: 既存ハッシュは true、未存在は false","status":"passed","title":"hasChunk: 既存ハッシュは true、未存在は false","duration":1.1771029999999882,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 空の DB では getAll が空配列を返す","status":"passed","title":"空の DB では getAll が空配列を返す","duration":0.7153370000000905,"failureMessages":[],"meta":{}}],"startTime":1772156673987,"endTime":1772156674007.7153,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/db/embedding-store.test.ts"},{"assertionResults":[{"ancestorTitles":["JobStore"],"fullName":"JobStore ジョブを作成して取得できる","status":"passed","title":"ジョブを作成して取得できる","duration":11.41989000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore ジョブのステータスを更新できる","status":"passed","title":"ジョブのステータスを更新できる","duration":8.067757999999912,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 存在しない job_id を更新するとエラー","status":"passed","title":"存在しない job_id を更新するとエラー","duration":5.00223799999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 同じ hash_snapshot + job_type の完了済みジョブがあれば isAlreadyDone が true","status":"passed","title":"同じ hash_snapshot + job_type の完了済みジョブがあれば isAlreadyDone が true","duration":7.1864850000000615,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 未完了ジョブは isAlreadyDone が false","status":"passed","title":"未完了ジョブは isAlreadyDone が false","duration":8.656888999999978,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore run_id でジョブ一覧を取得できる","status":"passed","title":"run_id でジョブ一覧を取得できる","duration":9.294839000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore ロールバックログを保存して取得できる","status":"passed","title":"ロールバックログを保存して取得できる","duration":5.714741000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 存在しない run_id のロールバックログは null","status":"passed","title":"存在しない run_id のロールバックログは null","duration":3.492639000000054,"failureMessages":[],"meta":{}}],"startTime":1772156673961,"endTime":1772156674020.4927,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/db/job-store.test.ts"},{"assertionResults":[{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア >= 0.7 は split","status":"passed","title":"スコア >= 0.7 は split","duration":1.1365330000000426,"failureMessages":[],"meta":{}},{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア 0.4〜0.7 未満は candidate","status":"passed","title":"スコア 0.4〜0.7 未満は candidate","duration":0.24539199999998118,"failureMessages":[],"meta":{}},{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア < 0.4 は continue","status":"passed","title":"スコア < 0.4 は continue","duration":0.15597300000001724,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 時間ギャップ 6時間以上でスコア +0.4","status":"passed","title":"時間ギャップ 6時間以上でスコア +0.4","duration":1.2577360000000226,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 話題転換語でスコア +0.3","status":"passed","title":"話題転換語でスコア +0.3","duration":0.38532800000001544,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 明示的終了宣言でスコア +0.6","status":"passed","title":"明示的終了宣言でスコア +0.6","duration":0.2854290000000219,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast スコアが累積する（時間ギャップ + 終了宣言で分割確定）","status":"passed","title":"スコアが累積する（時間ギャップ + 終了宣言で分割確定）","duration":0.2148520000000076,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 関係ない発言が続いても境界は出ない","status":"passed","title":"関係ない発言が続いても境界は出ない","duration":0.1987280000000169,"failureMessages":[],"meta":{}}],"startTime":1772156673985,"endTime":1772156673990.1987,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/boundary-detector.test.ts"},{"assertionResults":[{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown User:/Assistant: 形式を正しくパースする","status":"passed","title":"User:/Assistant: 形式を正しくパースする","duration":2.5763460000000578,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown **User:** 形式（太字）を正しくパースする","status":"passed","title":"**User:** 形式（太字）を正しくパースする","duration":0.4702470000000858,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown タイムスタンプ付きフォーマットを正しくパースする","status":"passed","title":"タイムスタンプ付きフォーマットを正しくパースする","duration":1.4770140000000538,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown Human:/AI: 形式を正しくパースする","status":"passed","title":"Human:/AI: 形式を正しくパースする","duration":0.3456610000000637,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown 複数行の発言をまとめてパースする","status":"passed","title":"複数行の発言をまとめてパースする","duration":0.4505020000000286,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown 空文字列を渡すと空配列を返す","status":"passed","title":"空文字列を渡すと空配列を返す","duration":0.5204800000000205,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown msg_id が一意で連番になっている","status":"passed","title":"msg_id が一意で連番になっている","duration":0.8007680000000619,"failureMessages":[],"meta":{}}],"startTime":1772156673976,"endTime":1772156673982.8008,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/chat-parser.test.ts"},{"assertionResults":[{"ancestorTitles":["chunkText"],"fullName":"chunkText 空文字列は空配列を返す","status":"passed","title":"空文字列は空配列を返す","duration":2.2047129999999697,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 短いテキスト（MIN未満）は空配列を返す","status":"passed","title":"短いテキスト（MIN未満）は空配列を返す","duration":0.3755069999999705,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 1段落は1チャンクになる","status":"passed","title":"1段落は1チャンクになる","duration":1.2387699999999313,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText MAX_CHARS を超えると複数チャンクに分割される","status":"passed","title":"MAX_CHARS を超えると複数チャンクに分割される","duration":0.5629430000000184,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 各チャンクに一意の chunkId が割り当てられる","status":"passed","title":"各チャンクに一意の chunkId が割り当てられる","duration":0.2736210000000483,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText hash は同じテキストなら同じ値になる","status":"passed","title":"hash は同じテキストなら同じ値になる","duration":0.4319109999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText ノートパスがチャンクIDに反映される","status":"passed","title":"ノートパスがチャンクIDに反映される","duration":0.4540100000000393,"failureMessages":[],"meta":{}}],"startTime":1772156673991,"endTime":1772156673996.454,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/chunker.test.ts"},{"assertionResults":[{"ancestorTitles":["estimateNote"],"fullName":"estimateNote 単一トピックのチャットは estimatedThreadCount=1","status":"passed","title":"単一トピックのチャットは estimatedThreadCount=1","duration":7.568220999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["estimateNote"],"fullName":"estimateNote 個人情報（メールアドレス）が含まれると hasPersonalData=true","status":"passed","title":"個人情報（メールアドレス）が含まれると hasPersonalData=true","duration":3.1365820000000895,"failureMessages":[],"meta":{}},{"ancestorTitles":["estimateNote"],"fullName":"estimateNote notePath と estimatedDurationSec が正しく返る","status":"passed","title":"notePath と estimatedDurationSec が正しく返る","duration":3.2558460000000196,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent 同じ文字列は同じハッシュ","status":"passed","title":"同じ文字列は同じハッシュ","duration":1.8187740000000758,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent 異なる文字列は異なるハッシュ","status":"passed","title":"異なる文字列は異なるハッシュ","duration":1.6647110000000112,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent SHA-256 形式（64文字の16進数）","status":"passed","title":"SHA-256 形式（64文字の16進数）","duration":1.0915059999999812,"failureMessages":[],"meta":{}}],"startTime":1772156673989,"endTime":1772156674008.0916,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/estimator.test.ts"},{"assertionResults":[{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 同一ベクトルは 1.0 を返す","status":"passed","title":"同一ベクトルは 1.0 を返す","duration":1.1183480000000259,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 直交ベクトルは 0 を返す","status":"passed","title":"直交ベクトルは 0 を返す","duration":0.34068600000000515,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 逆方向ベクトルは -1.0 を返す","status":"passed","title":"逆方向ベクトルは -1.0 を返す","duration":0.1543179999999893,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 正規化済みでないベクトルでもスコアが [0, 1] に収まる（同方向）","status":"passed","title":"正規化済みでないベクトルでもスコアが [0, 1] に収まる（同方向）","duration":0.29955799999999044,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity ゼロベクトルは 0 を返す（ゼロ除算を起こさない）","status":"passed","title":"ゼロベクトルは 0 を返す（ゼロ除算を起こさない）","duration":0.2949899999999843,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 一般的なベクトルでスコアが計算される","status":"passed","title":"一般的なベクトルでスコアが計算される","duration":0.16380399999997053,"failureMessages":[],"meta":{}}],"startTime":1772156673982,"endTime":1772156673984.2996,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/similarity.test.ts"},{"assertionResults":[{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 時間ギャップがあるチャットを複数スレッドに分割する","status":"passed","title":"時間ギャップがあるチャットを複数スレッドに分割する","duration":4.111201000000051,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 分割点がないチャットは1スレッドのまま","status":"passed","title":"分割点がないチャットは1スレッドのまま","duration":1.2925189999999702,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 空メッセージ配列で1スレッド（空）を返す","status":"passed","title":"空メッセージ配列で1スレッド（空）を返す","duration":0.3918070000000853,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 各スレッドに一意の thread_id が付く","status":"passed","title":"各スレッドに一意の thread_id が付く","duration":0.5322929999999815,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 全メッセージがいずれかのスレッドに含まれる","status":"passed","title":"全メッセージがいずれかのスレッドに含まれる","duration":0.2327460000000201,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads startIndex / endIndex が正しく設定される","status":"passed","title":"startIndex / endIndex が正しく設定される","duration":0.39080999999998767,"failureMessages":[],"meta":{}}],"startTime":1772156673997,"endTime":1772156674003.5322,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/thread-builder.test.ts"}]}