{"numTotalTestSuites":18,"numPassedTestSuites":18,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":53,"numPassedTests":53,"numFailedTests":0,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1772159843540,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore ベクトルを保存して全件取得できる","status":"passed","title":"ベクトルを保存して全件取得できる","duration":14.755825999999956,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 同じ chunk_id で upsert すると上書きされる","status":"passed","title":"同じ chunk_id で upsert すると上書きされる","duration":0.9699679999999944,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 複数チャンクを保存して全件取得できる","status":"passed","title":"複数チャンクを保存して全件取得できる","duration":0.8015310000000682,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore hasChunk: 既存ハッシュは true、未存在は false","status":"passed","title":"hasChunk: 既存ハッシュは true、未存在は false","duration":1.0745670000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmbeddingStore"],"fullName":"EmbeddingStore 空の DB では getAll が空配列を返す","status":"passed","title":"空の DB では getAll が空配列を返す","duration":0.7058569999999236,"failureMessages":[],"meta":{}}],"startTime":1772159844089,"endTime":1772159844106.7058,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/db/embedding-store.test.ts"},{"assertionResults":[{"ancestorTitles":["JobStore"],"fullName":"JobStore ジョブを作成して取得できる","status":"passed","title":"ジョブを作成して取得できる","duration":10.46180099999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore ジョブのステータスを更新できる","status":"passed","title":"ジョブのステータスを更新できる","duration":6.692116999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 存在しない job_id を更新するとエラー","status":"passed","title":"存在しない job_id を更新するとエラー","duration":5.241197999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 同じ hash_snapshot + job_type の完了済みジョブがあれば isAlreadyDone が true","status":"passed","title":"同じ hash_snapshot + job_type の完了済みジョブがあれば isAlreadyDone が true","duration":7.38191599999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 未完了ジョブは isAlreadyDone が false","status":"passed","title":"未完了ジョブは isAlreadyDone が false","duration":5.953273999999965,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore run_id でジョブ一覧を取得できる","status":"passed","title":"run_id でジョブ一覧を取得できる","duration":8.00746300000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore ロールバックログを保存して取得できる","status":"passed","title":"ロールバックログを保存して取得できる","duration":4.6464350000001104,"failureMessages":[],"meta":{}},{"ancestorTitles":["JobStore"],"fullName":"JobStore 存在しない run_id のロールバックログは null","status":"passed","title":"存在しない run_id のロールバックログは null","duration":2.913675000000012,"failureMessages":[],"meta":{}}],"startTime":1772159844067,"endTime":1772159844118.9136,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/db/job-store.test.ts"},{"assertionResults":[{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア >= 0.7 は split","status":"passed","title":"スコア >= 0.7 は split","duration":1.238787000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア 0.4〜0.7 未満は candidate","status":"passed","title":"スコア 0.4〜0.7 未満は candidate","duration":0.2868090000000052,"failureMessages":[],"meta":{}},{"ancestorTitles":["decideBoundary"],"fullName":"decideBoundary スコア < 0.4 は continue","status":"passed","title":"スコア < 0.4 は continue","duration":0.20255699999995613,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 時間ギャップ 6時間以上でスコア +0.4","status":"passed","title":"時間ギャップ 6時間以上でスコア +0.4","duration":1.3193630000000098,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 話題転換語でスコア +0.3","status":"passed","title":"話題転換語でスコア +0.3","duration":0.38735500000001366,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 明示的終了宣言でスコア +0.6","status":"passed","title":"明示的終了宣言でスコア +0.6","duration":0.3445389999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast スコアが累積する（時間ギャップ + 終了宣言で分割確定）","status":"passed","title":"スコアが累積する（時間ギャップ + 終了宣言で分割確定）","duration":0.20670499999999947,"failureMessages":[],"meta":{}},{"ancestorTitles":["detectBoundariesFast"],"fullName":"detectBoundariesFast 関係ない発言が続いても境界は出ない","status":"passed","title":"関係ない発言が続いても境界は出ない","duration":0.24505999999996675,"failureMessages":[],"meta":{}}],"startTime":1772159844088,"endTime":1772159844092.3445,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/boundary-detector.test.ts"},{"assertionResults":[{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown User:/Assistant: 形式を正しくパースする","status":"passed","title":"User:/Assistant: 形式を正しくパースする","duration":2.6080120000000306,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown **User:** 形式（太字）を正しくパースする","status":"passed","title":"**User:** 形式（太字）を正しくパースする","duration":0.4950450000000046,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown タイムスタンプ付きフォーマットを正しくパースする","status":"passed","title":"タイムスタンプ付きフォーマットを正しくパースする","duration":1.2983800000000087,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown Human:/AI: 形式を正しくパースする","status":"passed","title":"Human:/AI: 形式を正しくパースする","duration":0.448504000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown 複数行の発言をまとめてパースする","status":"passed","title":"複数行の発言をまとめてパースする","duration":0.4566300000000183,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown 空文字列を渡すと空配列を返す","status":"passed","title":"空文字列を渡すと空配列を返す","duration":0.5127489999999852,"failureMessages":[],"meta":{}},{"ancestorTitles":["parseChatMarkdown"],"fullName":"parseChatMarkdown msg_id が一意で連番になっている","status":"passed","title":"msg_id が一意で連番になっている","duration":0.8110319999999547,"failureMessages":[],"meta":{}}],"startTime":1772159844083,"endTime":1772159844089.811,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/chat-parser.test.ts"},{"assertionResults":[{"ancestorTitles":["chunkText"],"fullName":"chunkText 空文字列は空配列を返す","status":"passed","title":"空文字列は空配列を返す","duration":1.9877260000000092,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 短いテキスト（MIN未満）は空配列を返す","status":"passed","title":"短いテキスト（MIN未満）は空配列を返す","duration":0.37857700000000705,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 1段落は1チャンクになる","status":"passed","title":"1段落は1チャンクになる","duration":1.2407240000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText MAX_CHARS を超えると複数チャンクに分割される","status":"passed","title":"MAX_CHARS を超えると複数チャンクに分割される","duration":0.6002569999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText 各チャンクに一意の chunkId が割り当てられる","status":"passed","title":"各チャンクに一意の chunkId が割り当てられる","duration":0.2611699999999928,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText hash は同じテキストなら同じ値になる","status":"passed","title":"hash は同じテキストなら同じ値になる","duration":0.3937219999999684,"failureMessages":[],"meta":{}},{"ancestorTitles":["chunkText"],"fullName":"chunkText ノートパスがチャンクIDに反映される","status":"passed","title":"ノートパスがチャンクIDに反映される","duration":0.4225940000000037,"failureMessages":[],"meta":{}}],"startTime":1772159844089,"endTime":1772159844094.4226,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/chunker.test.ts"},{"assertionResults":[{"ancestorTitles":["estimateNote"],"fullName":"estimateNote 単一トピックのチャットは estimatedThreadCount=1","status":"passed","title":"単一トピックのチャットは estimatedThreadCount=1","duration":5.761410000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["estimateNote"],"fullName":"estimateNote 個人情報（メールアドレス）が含まれると hasPersonalData=true","status":"passed","title":"個人情報（メールアドレス）が含まれると hasPersonalData=true","duration":2.5832209999999804,"failureMessages":[],"meta":{}},{"ancestorTitles":["estimateNote"],"fullName":"estimateNote notePath と estimatedDurationSec が正しく返る","status":"passed","title":"notePath と estimatedDurationSec が正しく返る","duration":3.093838000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent 同じ文字列は同じハッシュ","status":"passed","title":"同じ文字列は同じハッシュ","duration":1.748802000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent 異なる文字列は異なるハッシュ","status":"passed","title":"異なる文字列は異なるハッシュ","duration":1.5234330000000114,"failureMessages":[],"meta":{}},{"ancestorTitles":["hashContent"],"fullName":"hashContent SHA-256 形式（64文字の16進数）","status":"passed","title":"SHA-256 形式（64文字の16進数）","duration":0.9247400000000425,"failureMessages":[],"meta":{}}],"startTime":1772159844088,"endTime":1772159844103.9248,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/estimator.test.ts"},{"assertionResults":[{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 同一ベクトルは 1.0 を返す","status":"passed","title":"同一ベクトルは 1.0 を返す","duration":1.0492510000000266,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 直交ベクトルは 0 を返す","status":"passed","title":"直交ベクトルは 0 を返す","duration":0.30573900000001686,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 逆方向ベクトルは -1.0 を返す","status":"passed","title":"逆方向ベクトルは -1.0 を返す","duration":0.15613500000000613,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 正規化済みでないベクトルでもスコアが [0, 1] に収まる（同方向）","status":"passed","title":"正規化済みでないベクトルでもスコアが [0, 1] に収まる（同方向）","duration":0.3788509999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity ゼロベクトルは 0 を返す（ゼロ除算を起こさない）","status":"passed","title":"ゼロベクトルは 0 を返す（ゼロ除算を起こさない）","duration":0.3416770000000042,"failureMessages":[],"meta":{}},{"ancestorTitles":["cosineSimilarity"],"fullName":"cosineSimilarity 一般的なベクトルでスコアが計算される","status":"passed","title":"一般的なベクトルでスコアが計算される","duration":0.14996999999999616,"failureMessages":[],"meta":{}}],"startTime":1772159844085,"endTime":1772159844087.3418,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/similarity.test.ts"},{"assertionResults":[{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 時間ギャップがあるチャットを複数スレッドに分割する","status":"passed","title":"時間ギャップがあるチャットを複数スレッドに分割する","duration":3.670108999999968,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 分割点がないチャットは1スレッドのまま","status":"passed","title":"分割点がないチャットは1スレッドのまま","duration":1.1995620000000145,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 空メッセージ配列で1スレッド（空）を返す","status":"passed","title":"空メッセージ配列で1スレッド（空）を返す","duration":0.36613199999999324,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 各スレッドに一意の thread_id が付く","status":"passed","title":"各スレッドに一意の thread_id が付く","duration":0.5977140000000531,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads 全メッセージがいずれかのスレッドに含まれる","status":"passed","title":"全メッセージがいずれかのスレッドに含まれる","duration":0.2609780000000228,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildThreads"],"fullName":"buildThreads startIndex / endIndex が正しく設定される","status":"passed","title":"startIndex / endIndex が正しく設定される","duration":0.39837499999998727,"failureMessages":[],"meta":{}}],"startTime":1772159844092,"endTime":1772159844099.3984,"status":"passed","message":"","name":"/home/user/vault-alchemist/service/src/pipeline/thread-builder.test.ts"}]}